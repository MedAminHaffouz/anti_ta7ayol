chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"checkScam",title:"🔍 Check for scams",contexts:["selection"]})});chrome.contextMenus.onClicked.addListener((t,e)=>{t.menuItemId==="checkScam"&&t.selectionText&&(e!=null&&e.id)&&chrome.tabs.sendMessage(e.id,{action:"checkSelectedText",text:t.selectionText.trim()}).catch(o=>{console.error("Failed to send message to content script:",o),chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]}).then(()=>{chrome.tabs.sendMessage(e.id,{action:"checkSelectedText",text:t.selectionText.trim()})}).catch(c=>{console.error("Failed to inject content script:",c)})})});chrome.runtime.onMessage.addListener((t,e,o)=>(t.action==="openPopup"&&chrome.action.openPopup().catch(c=>{console.error("Failed to open popup:",c)}),!0));
